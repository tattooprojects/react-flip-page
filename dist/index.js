!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactFlipPage=e(require("react")):t.ReactFlipPage=e(t.react)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(e,n){e.exports=t},function(t,e,n){t.exports=n(2)()},function(t,e,n){"use strict";var r=n(3);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(5),o=n(6);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);t.exports=o.locals||{}},function(t,e,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],o=0;o<t.length;o++){var i=t[o],c=e.base?i[0]+e.base:i[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var f=s(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:u,updater:v(p,e),references:1}),r.push(u)}return r}function l(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,f=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function p(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var d=null,g=0;function v(t,e){var n,r,o;if(e.singleton){var i=g++;n=d||(d=l(e)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=l(e),r=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=s(n[r]);a[o].references--}for(var i=c(t,e),l=0;l<n.length;l++){var u=s(n[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=i}}}},function(t,e,n){var r=n(7),o=n(8),i=n(9);e=r(!1);var a=o(i);e.push([t.i,".rfp-swipeHint {\n  animation: 2s ease-in-out rfp-swipeHint-vertical 2;\n  background-color: rgba(255,255,255,0.5);\n  border-radius: 15px;\n  box-sizing: border-box;\n  height: 30px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  width: 30px;\n}\n.rfp-swipeHint--vertical {\n  animation-name: rfp-swipeHint-vertical;\n  bottom: 20%;\n  left: 50%;\n  margin-left: -15px;\n}\n.rfp-swipeHint--horizontal {\n  animation-name: rfp-swipeHint-horizontal;\n  margin-top: -15px;\n  right: 20%;\n  top: 50%;\n}\n.rfp-swipeHint:before {\n  border-radius: 15px;\n  border: 3px double rgba(255,255,255,0.5);\n  box-sizing: border-box;\n  content: '';\n  height: 28px;\n  position: absolute;\n  width: 28px;\n}\n.rfp-swipeHint--vertical:before {\n  left: 50%;\n  margin-left: -14px;\n  top: 1px;\n}\n.rfp-swipeHint--horizontal:before {\n  left: 1px;\n  top: 1px;\n}\n.rfp-touchHint {\n  animation: 2s ease-in-out rfp-touchHint 2;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  z-index: 5;\n}\n.rfp-touchHint--vertical {\n  bottom: 5px;\n  left: 50%;\n  margin-left: -12px;\n}\n.rfp-touchHint--horizontal {\n  margin-top: -14px;\n  right: 5px;\n  top: 50%;\n}\n.rfp-touchHint:after, .rfp-swipeHint:after {\n  content: url("+a+");\n}\n.rfp-swipeHint:after {\n  position: absolute;\n  top: 11px;\n  left: 6px;\n}\n@keyframes rfp-swipeHint-vertical {\n  0% {\n    opacity: 0;\n    height: 30px;\n  }\n  20%, 40% {\n    opacity: 1;\n    height: 30px;\n  }\n  60%, 80% {\n    opacity: 1;\n    height: 60%;\n  }\n  100% {\n    opacity: 0;\n    height: 60%;\n  }\n}\n@keyframes rfp-swipeHint-horizontal {\n  0% {\n    opacity: 0;\n    width: 30px;\n  }\n  20%, 40% {\n    opacity: 1;\n    width: 30px;\n  }\n  60%, 80% {\n    opacity: 1;\n    width: 60%;\n  }\n  100% {\n    opacity: 0;\n    width: 60%;\n  }\n}\n@keyframes rfp-touchHint {\n  0% {\n    opacity: 0;\n  }\n  20% {\n    opacity: 1;\n  }\n  40%,60% {\n    transform: scale(0.75);\n  }\n  80% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24px' height='29px' viewBox='0 0 24 29' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E %3C!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --%3E %3Ctitle%3Etouch%3C/title%3E %3Cdesc%3ECreated with Sketch.%3C/desc%3E %3Cdefs%3E%3C/defs%3E %3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E %3Cg id='touch'%3E %3Cpath d='M12.1244203,7.32866727 C12.7498203,6.55580421 13.1244203,5.57164839 13.1244203,4.5 C13.1244203,2.0147185 11.1097018,0 8.6244203,0 C6.1391388,0 4.12442034,2.0147185 4.12442034,4.5 C4.12442034,5.57164839 4.49902039,6.55580421 5.1244203,7.32866727 L5.1244203,4.49129639 C5.1244203,2.56125662 6.6914237,1 8.6244203,1 C10.5534837,1 12.1244203,2.56310664 12.1244203,4.49129639 L12.1244203,7.32866727 L12.1244203,7.32866727 L12.1244203,7.32866727 Z' id='one-finger-tap-path' fill='%23000000'%3E%3C/path%3E %3Cpath d='M23.1244203,20.5 C23.1244203,25.1944206 19.3188409,29 14.6244203,29.0000003 C11.5115051,29.0000003 8.2262274,27.5474856 5.9652407,23.4282229 C2.70175208,17.4825159 -1.47172681,13.5832077 0.51553361,11.5959473 C1.9371827,10.1742982 4.16926196,11.5381668 6.1244203,13.3667868 L6.1244203,13.3667868 L6.1244203,4.50840855 C6.1244203,3.11541748 7.2437085,2 8.6244203,2 C10.0147583,2 11.1244203,3.12305276 11.1244203,4.50840855 L11.1244203,9.4983653 C11.5422506,9.1853054 12.0616174,9 12.6244203,9 C13.7069384,9 14.6193054,9.6774672 14.9702378,10.6281239 C15.4110134,10.2379894 15.9901312,10 16.6244203,10 C18.0147583,10 19.1244203,11.1182256 19.1244203,12.4976267 L19.1244203,12.5110883 C19.5422506,12.1985158 20.0616174,12.014191 20.6244203,12.014191 C22.0147583,12.014191 23.1244203,13.1335355 23.1244203,14.5143168 L23.1244203,20.5 L23.1244203,20.5 Z' id='one-finger-tap-path' fill='%23000000'%3E%3C/path%3E %3Cpath d='M14.6231595,27.9999999 C18.7659915,28 22.1244203,24.4147752 22.1244203,20.5 C22.1244203,20.5 22.1244203,22.8132437 22.1244203,20.5 L22.1244203,16.7491622 L22.1244203,14.5016756 C22.1244203,13.6723231 21.4586231,13 20.6244203,13 C19.7959932,13 19.1244203,13.6711894 19.1244203,14.5016756 L19.1244203,15 L18.1244203,15 L18.1244203,12.5064385 C18.1244203,11.6744555 17.4586231,11 16.6244203,11 C15.7959932,11 15.1244203,11.6715406 15.1244203,12.5064385 L15.1244203,14 L14.1244203,14 L14.1244203,11.5064385 C14.1244203,10.6744555 13.4586231,10 12.6244203,10 C11.7959932,10 11.1244203,10.6715406 11.1244203,11.5064385 L11.1244203,15 L10.1244203,15 L10.1244203,4.50524116 C10.1244203,3.67391942 9.4586231,3 8.6244203,3 C7.7959932,3 7.1244203,3.66712976 7.1244203,4.50524116 L7.1244203,15.7999878 C5.0660207,13.599567 2.35605012,11.1791206 1.24545305,12.2957153 C0.15828327,13.3887562 2.95978233,16.4007216 6.8717958,22.9830936 C8.6344162,25.9488875 10.8647052,27.9995418 14.6231595,27.9999999 L14.6231595,27.9999999 Z' id='one-finger-tap-path' fill='%23FFFFFF'%3E%3C/path%3E %3C/g%3E %3C/g%3E %3C/svg%3E"},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(1),a=n.n(i);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r,o=f(i);function i(){return c(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"render",value:function(){return this.props.component}}])&&l(e.prototype,n),r&&l(e,r),i}(o.a.PureComponent);d.propTypes={component:a.a.node.isRequired};var g=d,v=(n(4),function(t){return"linear-gradient(to ".concat(t,", rgba(0,0,0,0.25) 0%,rgba(0,0,0,0) 50px)")});function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?S(t):e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(e))},k=function(t){return{posX:t.pageX||t.clientX||t.touches&&t.touches[0].pageX,posY:t.pageY||t.clientY||t.touches&&t.touches[0].pageY}},E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(s,t);var e,n,i,a=w(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).state={page:0,startY:-1,diffY:0,timestamp:0,angle:0,rotate:0,direction:"",lastDirection:"",secondHalfStyle:{},firstHalfStyle:{},canAnimate:!0},e.startMoving=e.startMoving.bind(S(e)),e.moveGesture=e.moveGesture.bind(S(e)),e.stopMoving=e.stopMoving.bind(S(e)),e.reset=e.reset.bind(S(e)),e.mouseLeave=e.mouseLeave.bind(S(e)),e.incrementPage=e.incrementPage.bind(S(e)),e.decrementPage=e.decrementPage.bind(S(e)),e.hasNextPage=e.hasNextPage.bind(S(e)),e.hasPreviousPage=e.hasPreviousPage.bind(S(e)),e.turnRightOrDown=e.turnRightOrDown.bind(S(e)),e.turnLeftOrUp=e.turnLeftOrUp.bind(S(e)),e.transition="transform ".concat(e.props.animationDuration/1e3,"s ease-in-out"),e.onStartSwipingCalled=!1,e}return e=s,(n=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"flatChildren",value:function(){return Array.prototype.flat.call(this.props.children)}},{key:"isLastPage",value:function(){return this.state.page+1===r.Children.count(this.flatChildren())}},{key:"isFirstPage",value:function(){return 0===this.state.page}},{key:"showHint",value:function(){var t=this,e=this.props,n=e.orientation,r=e.perspective,o=this.transition;this.setState({secondHalfStyle:{transition:o}},(function(){t.setState({secondHalfStyle:{transition:o,transform:"perspective(".concat(r,"vertical"===n?") rotateX(30deg)":") rotateY(-30deg)")}}),t.hintHideTimeout=setTimeout((function(){return t.setState({secondHalfStyle:{transition:o}})}),1e3)}))}},{key:"incrementPage",value:function(){var t=this,e=r.Children.count(this.flatChildren()),n=this.state.page;this.setState({page:(n+1)%e},(function(){return t.props.onPageChange(t.state.page,"next")}))}},{key:"decrementPage",value:function(){var t,e=this,n=r.Children.count(this.flatChildren()),o=this.state.page;t=this.isFirstPage()?n-1:o-1,this.setState({page:t},(function(){return e.props.onPageChange(e.state.page,"prev")}))}},{key:"hasNextPage",value:function(){return!this.isLastPage()}},{key:"hasPreviousPage",value:function(){return!this.isFirstPage()}},{key:"startMoving",value:function(t){var e=t.target.tagName;if("BUTTON"!==e&&"A"!==e){!function(t){t.preventDefault()}(t);var n=k(t),r=n.posX,o=n.posY;this.setState({startX:r,startY:o,canAnimate:!1})}}},{key:"moveGesture",value:function(t){t.preventDefault();var e=k(t),n=e.posX,r=e.posY,o=this.props,i=o.orientation,a=o.treshold,s=o.maxAngle,c=o.perspective,l=this.state,u=l.startX,f=l.startY,p=l.diffX,h=l.diffY,d=l.direction,g=l.lastDirection;if(-1!==f){var v=r-f,m=n-u,y=("up"===d||"down"===d?v:m)/250*180,b=!1;"up"===d||"left"===d?b=!this.hasNextPage():"down"!==d&&"right"!==d||(b=!this.hasPreviousPage());var w=Math.min(Math.abs(y),b?s:180),C=Math.abs(m)>a||Math.abs(v)>a,S="";!this.onStartSwipingCalled&&C&&(this.props.onStartSwiping(),this.onStartSwipingCalled=!0),""===d&&C&&(v<0&&"vertical"===i?S="up":v>0&&"vertical"===i?S="down":m<0&&"horizontal"===i?S="left":m>0&&"horizontal"===i&&(S="right"),this.setState({direction:S}));var x=g;h>v?x="up":h<v?x="down":p>m?x="right":p<m&&(x="left"),this.setState({angle:y,rotate:w,timestamp:Date.now(),diffY:v,diffX:m,lastDirection:x}),v<0&&"up"===this.state.direction?this.setState({angle:y,secondHalfStyle:{transform:"perspective(".concat(c,") rotateX(").concat(w,"deg)")}}):v>0&&"down"===this.state.direction?this.setState({angle:y,firstHalfStyle:{transform:"perspective(".concat(c,") rotateX(-").concat(w,"deg)"),zIndex:2}}):m<0&&"left"===this.state.direction?this.setState({angle:y,secondHalfStyle:{transform:"perspective(".concat(c,") rotateY(-").concat(w,"deg)")}}):m>0&&"right"===this.state.direction&&this.setState({angle:y,firstHalfStyle:{transform:"perspective(".concat(c,") rotateY(").concat(w,"deg)"),zIndex:2}})}}},{key:"turnRightOrDown",value:function(t){var e=this,n=this.props,r=n.perspective,o=n.orientation,i=n.animationDuration,a=this.transition,s="perspective(".concat(r,") ");s+="vertical"===o?"rotateX(180deg)":"rotateY(-180deg)",this.setState({firstHalfStyle:{transition:a,transform:"",zIndex:"auto"},secondHalfStyle:{transition:a,transform:s},canAnimate:!1},(function(){setTimeout((function(){t(),e.setState({secondHalfStyle:{},canAnimate:!0})}),i)}))}},{key:"turnLeftOrUp",value:function(t){var e=this,n=this.props,r=n.perspective,o=n.orientation,i=n.animationDuration,a=this.transition,s="perspective(".concat(r,") ");s+="vertical"===o?"rotateX(-180deg)":"rotateY(180deg)",this.setState({firstHalfStyle:{transition:a,transform:s,zIndex:2},secondHalfStyle:{transition:a,transform:""},canAnimate:!1},(function(){setTimeout((function(){t(),e.setState({firstHalfStyle:{},canAnimate:!0})}),i)}))}},{key:"gotoNextPage",value:function(){this.hasNextPage()&&this.state.canAnimate&&((0,this.props.onStartPageChange)(this.state.page,"next"),this.turnLeftOrUp(this.incrementPage))}},{key:"gotoPreviousPage",value:function(){this.hasPreviousPage()&&this.state.canAnimate&&((0,this.props.onStartPageChange)(this.state.page,"prev"),this.turnRightOrDown(this.decrementPage))}},{key:"gotoPage",value:function(t){var e=this.flatChildren(),n=this.props.onPageChange;if(!(t>=0&&t<e.length))throw new RangeError("`page` argument is out of bounds.");this.setState({page:t},(function(){n(t,"set")}))}},{key:"stopMoving",value:function(t){var e=this,n=this.props.onStopSwiping,r=this.state,o=r.timestamp,i=r.angle,a=r.direction,s=r.lastDirection,c=Date.now()-o,l=i<=-90||c<=20&&"up"===a&&"up"===s||c<=20&&"right"===a&&"right"===s,u=i>=90||c<=20&&"down"===a&&"down"===s||c<=20&&"left"===a&&"left"===s;this.reset((function(){n(),l&&e.gotoPreviousPage(),u&&e.gotoNextPage(),"function"==typeof t&&t()}))}},{key:"beforeItem",value:function(){var t=this.props.firstComponent,e=this.flatChildren();return this.isFirstPage()?t:e[this.state.page-1]}},{key:"afterItem",value:function(){var t=this.props.lastComponent,e=this.flatChildren();return this.isLastPage()?t:e[this.state.page+1]}},{key:"mouseLeave",value:function(){this.props.flipOnLeave?this.stopMoving():this.reset()}},{key:"reset",value:function(t){var e=this.transition;this.onStartSwipingCalled=!1,this.setState({startY:-1,startX:-1,angle:0,rotate:0,direction:"",lastDirection:"",secondHalfStyle:{transition:e},firstHalfStyle:{transition:e},canAnimate:!0},t)}},{key:"renderPage",value:function(t,e){var n=e===this.state.page,r=this.state,i=r.page,a=r.direction,s=r.rotate,c=this.props,l=c.orientation,u=function(t,e,n,r,o,i,a,s,c){return{container:{display:t===e?"block":"none",height:"100%",overflow:!1===o?"hidden":"",position:"relative",touchAction:"none",width:"100%"},part:{position:"absolute"},visiblePart:{transformStyle:"preserve-3d"},firstHalf:{bottom:"vertical"===i?"50%":0,left:0,right:"vertical"===i?0:"50%",top:0,transformOrigin:"vertical"===i?"bottom center":"right center"},secondHalf:{bottom:0,left:"vertical"===i?0:"50%",right:0,top:"vertical"===i?"50%":0,transformOrigin:"vertical"===i?"top center":"left center"},face:{backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,transformStyle:"preserve-3d"},back:{transform:"vertical"===i?"rotateX(180deg)":"rotateY(180deg)"},before:{bottom:0,left:0,right:0,top:0},after:{bottom:0,left:"vertical"===i?0:"50%",right:0,top:"vertical"===i?"50%":0},cut:{background:s,bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0},firstCut:{right:"vertical"===i?0:"-100%"},pull:{left:"vertical"===i?0:"-100%",position:"absolute",height:"100%",right:0,top:"vertical"===i?"-100%":0},gradient:{bottom:0,left:0,pointerEvents:"none",position:"absolute",right:0,top:0,transition:"opacity ".concat(c/1e3,"s ease-in-out"),opacity:n?1:0},gradientBefore:{background:"right"===n?v("left"):"down"===n?v("top"):"",width:"horizontal"===i?"50%":"100%",height:"vertical"===i?"50%":"100%"},gradientAfter:{background:"left"===n?v("right"):"up"===n?v("bottom"):""},gradientFirstHalf:{background:"left"===n?v("left"):"up"===n?v("top"):""},gradientSecondHalf:{background:"right"===n?v("right"):"down"===n?v("bottom"):""},mask:{backgroundColor:"#000",bottom:0,left:0,opacity:""!==n?Math.max(a-Math.abs(r)/90*a,0):0,pointerEvents:"none",position:"absolute",right:0,top:0},maskReverse:{opacity:""!==n?Math.max(Math.abs(r)/90*a-a,0):0}}}(i,e,a,s,c.uncutPages,l,c.maskOpacity,c.pageBackground,c.animationDuration),f=u.container,p=u.part,h=u.visiblePart,d=u.firstHalf,m=u.secondHalf,y=u.face,b=u.back,w=u.before,C=u.after,S=u.cut,x=u.firstCut,k=u.pull,E=u.gradient,O=u.gradientBefore,H=u.gradientAfter,L=u.gradientSecondHalf,M=u.gradientFirstHalf,j=u.mask,T=u.maskReverse,_=o.a.createElement(g,{shouldUpdate:n,component:t}),R=this.beforeItem(),D=this.afterItem(),A=R?o.a.createElement(g,{component:R,shouldUpdate:n}):null,N=D?o.a.createElement(g,{component:D,shouldUpdate:n}):null,Y=this.startMoving;return o.a.createElement("div",{role:"presentation",key:e,onMouseDown:Y,onTouchStart:Y,onMouseMove:this.moveGesture,onTouchMove:this.moveGesture,onMouseUp:this.stopMoving,onTouchEnd:this.stopMoving,onMouseLeave:this.mouseLeave,style:f},o.a.createElement("div",{style:P(p,w,S)},A,o.a.createElement("div",{style:j}),o.a.createElement("div",{style:P(E,O)})),o.a.createElement("div",{style:P(p,S,C)},o.a.createElement("div",{style:k},N),o.a.createElement("div",{style:j}),o.a.createElement("div",{style:P(E,H)})),o.a.createElement("div",{style:P(p,h,d,this.state.firstHalfStyle)},o.a.createElement("div",{style:y},o.a.createElement("div",{style:P(S,x)},_),o.a.createElement("div",{style:P(j,T)}),o.a.createElement("div",{style:P(E,M)})),o.a.createElement("div",{style:P(y,b)},o.a.createElement("div",{style:S},o.a.createElement("div",{style:k},A)))),o.a.createElement("div",{style:P(p,h,m,this.state.secondHalfStyle)},o.a.createElement("div",{style:y},o.a.createElement("div",{style:S},o.a.createElement("div",{style:k},_)),o.a.createElement("div",{style:P(j,T)}),o.a.createElement("div",{style:P(E,L)})),o.a.createElement("div",{style:P(y,b)},o.a.createElement("div",{style:P(p,C,S,x)},N))))}},{key:"render",value:function(){var t=this,e=this.props,n=e.style,i=e.className,a=e.width,s=e.height,c=this.flatChildren(),l=P(n,{height:s,position:"relative",width:a});return o.a.createElement("div",{style:l,className:i},r.Children.map(c,(function(e,n){return t.renderPage(e,n)})))}}])&&y(e.prototype,n),i&&y(e,i),s}(r.Component);E.defaultProps={children:[],orientation:"vertical",animationDuration:200,treshold:10,maxAngle:45,maskOpacity:.4,perspective:"130em",pageBackground:"#fff",firstComponent:null,lastComponent:null,uncutPages:!1,style:{},height:480,width:320,onPageChange:function(){},onStartPageChange:function(){},onStartSwiping:function(){},onStopSwiping:function(){},className:"",flipOnLeave:!1},E.propTypes={children:a.a.oneOfType([a.a.arrayOf(a.a.node),a.a.node]),orientation:a.a.oneOf(["vertical","horizontal"]),animationDuration:a.a.number,treshold:a.a.number,maxAngle:a.a.number,maskOpacity:a.a.number,perspective:a.a.string,pageBackground:a.a.string,firstComponent:a.a.element,flipOnLeave:a.a.bool,lastComponent:a.a.element,uncutPages:a.a.bool,style:a.a.object,height:a.a.number,width:a.a.number,onPageChange:a.a.func,onStartPageChange:a.a.func,onStartSwiping:a.a.func,onStopSwiping:a.a.func,className:a.a.string};e.default=E}])}));